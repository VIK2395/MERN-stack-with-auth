(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(20),s=n.n(a),r=(n(26),n(2)),o=n(10);function i(){}var l=Object(c.createContext)({token:null,userId:null,login:i,logout:i}),u=n(0),j=function(){var e=Object(r.g)(),t=Object(c.useContext)(l);return Object(u.jsx)("nav",{children:Object(u.jsxs)("div",{className:"nav-wrapper",style:{padding:"0 2rem"},children:[Object(u.jsx)("span",{style:{userSelect:"none",fontSize:"25px"},children:"Todos"}),Object(u.jsxs)("ul",{className:"right",children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.c,{to:"/create",children:"Add"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.c,{to:"/todos",children:"Home"})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"/",onClick:function(n){n.preventDefault(),t.logout(),e.push("/")},children:"Log out"})})]})]})})},d=n(5),b="userData",h=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(d.a)(s,2),o=r[0],i=r[1],l=Object(c.useCallback)((function(e,t){a(e),i(t),localStorage.setItem(b,JSON.stringify({token:e,userId:t}))}),[]),u=Object(c.useCallback)((function(){a(null),i(null),localStorage.removeItem(b)}),[]),j=Object(c.useCallback)((function(e,t){a(e),i(t),localStorage.setItem(b,JSON.stringify({token:e,userId:t}))}),[]);return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem(b));e&&e.token&&l(e.token,e.userId)}),[l]),{login:l,signup:j,logout:u,token:n,userId:o}},O=n(4),p=n.n(O),x=n(9),f=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1];return[Object(c.useCallback)(function(){var e=Object(x.a)(p.a.mark((function e(t){var n,c,s,r,o,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",c=i.length>2&&void 0!==i[2]?i[2]:null,s=i.length>3&&void 0!==i[3]?i[3]:{},a(!0),e.prev=4,c&&(c=JSON.stringify(c),s["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:c,headers:s});case 8:return r=e.sent,e.next=11,r.json();case 11:if(o=e.sent,r.ok){e.next=14;break}throw new Error(o.message||"Ooops! Something went wrong.");case 14:return a(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(4),a(!1),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),n]},v=function(){return Object(c.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[])},m=function(e){var t=e.todo,n=e.onDelete;return Object(u.jsxs)("div",{className:"card blue-grey darken-1",children:[Object(u.jsxs)("div",{className:"card-content white-text",children:[Object(u.jsx)("h3",{children:t.title}),Object(u.jsx)("p",{style:{fontSize:"24px"},children:t.content})]}),Object(u.jsx)("div",{className:"card-action",children:Object(u.jsx)("button",{className:"waves-effect waves-light btn",onClick:function(){return n(t._id)},children:"Delete"})})]})},g=function(e){var t=e.todos,n=e.onDelete;return Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsx)(m,{todo:e,onDelete:n},e._id)}))})},w=function(){var e=v(),t=Object(c.useState)([]),n=Object(d.a)(t,2),a=n[0],s=n[1],r=f(),o=Object(d.a)(r,1)[0],i=Object(c.useContext)(l).token,j=Object(c.useCallback)(Object(x.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o("/todo","GET",null,{Authorization:"Bearer ".concat(i)});case 3:n=t.sent,s(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[i,o,e]),b=function(){var t=Object(x.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o("/todo/".concat(n),"DELETE",null,{Authorization:"Bearer ".concat(i)});case 3:s(a.filter((function(e){return e._id!==n}))),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){j()}),[j]),0===a.length?Object(u.jsx)("p",{style:{textAlign:"center",fontSize:"24px"},children:"No todos yet"}):Object(u.jsx)(g,{todos:a,onDelete:b})},k=n(13),N=n(11),y=function(){var e=Object(r.g)(),t=Object(c.useContext)(l),n=f(),a=Object(d.a)(n,1)[0],s=v(),i=Object(c.useState)({title:"",content:""}),j=Object(d.a)(i,2),b=j[0],h=j[1],O=function(e){h(Object(N.a)(Object(N.a)({},b),{},Object(k.a)({},e.target.id,e.target.value)))},m=function(){var n=Object(x.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a("/todo/create","POST",Object(N.a)({},b),{Authorization:"Bearer ".concat(t.token)});case 3:e.push("/todos"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),s(n.t0.message);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"row",style:{marginTop:"100px"},children:Object(u.jsx)("div",{className:"col s6 offset-s3",children:Object(u.jsxs)("div",{className:"card cyan darken-3",children:[Object(u.jsxs)("div",{className:"card-content white-text",children:[Object(u.jsx)("span",{className:"card-title",style:{marginBottom:"30px"},children:"Create a todo"}),Object(u.jsxs)("div",{className:"input-field",children:[Object(u.jsx)("input",{placeholder:"Enter title",autoComplete:"off",id:"title",type:"text",onChange:O}),Object(u.jsx)("label",{htmlFor:"title",className:"active",children:"Title"})]}),Object(u.jsxs)("div",{className:"input-field",style:{marginBottom:"0px"},children:[Object(u.jsx)("input",{placeholder:"Enter content",autoComplete:"off",id:"content",type:"text",onChange:O}),Object(u.jsx)("label",{htmlFor:"content",className:"active",children:"Content"})]})]}),Object(u.jsxs)("div",{className:"card-action",children:[Object(u.jsx)("button",{className:"waves-effect waves-light btn",style:{marginRight:"14px"},onClick:m,children:"Create"}),Object(u.jsx)(o.b,{to:"/todos",className:"waves-effect waves-light btn",children:"Close"})]})]})})})},C=function(){var e=Object(c.useContext)(l),t=v(),n=f(),a=Object(d.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)({email:"",password:""}),i=Object(d.a)(o,2),j=i[0],b=i[1],h=function(e){b(Object(N.a)(Object(N.a)({},j),{},Object(k.a)({},e.target.id,e.target.value)))},O=function(){var n=Object(x.a)(p.a.mark((function n(){var c,a,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s("/auth/signup","POST",Object(N.a)({},j));case 3:c=n.sent,a=c.token,r=c.userId,e.signup(a,r),t("User created."),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),t(n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}(),m=function(){var n=Object(x.a)(p.a.mark((function n(){var c,a,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s("/auth/login","POST",Object(N.a)({},j));case 3:c=n.sent,a=c.token,r=c.userId,e.login(a,r),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),t(n.t0.message);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"row",style:{marginTop:"100px"},children:Object(u.jsx)("div",{className:"col s6 offset-s3",children:Object(u.jsxs)("div",{className:"card blue-grey darken-1",children:[Object(u.jsxs)("div",{className:"card-content white-text",children:[Object(u.jsx)("span",{className:"card-title",style:{marginBottom:"30px"},children:"Authentication"}),Object(u.jsxs)("div",{className:"input-field",children:[Object(u.jsx)("input",{placeholder:"Enter email",autoComplete:"off",id:"email",type:"email",className:"validate",onChange:h}),Object(u.jsx)("label",{htmlFor:"email",className:"active",children:"Email"})]}),Object(u.jsxs)("div",{className:"input-field",style:{marginBottom:"0px"},children:[Object(u.jsx)("input",{placeholder:"Enter password",id:"password",type:"password",className:"validate",onChange:h}),Object(u.jsx)("label",{htmlFor:"password",className:"active",children:"Password"})]})]}),Object(u.jsxs)("div",{className:"card-action",children:[Object(u.jsx)("button",{className:"waves-effect waves-light btn",style:{marginRight:"14px"},onClick:m,disabled:r,children:"Log in"}),Object(u.jsx)("button",{className:"waves-effect waves-light btn",onClick:O,disabled:r,children:"Sign up"})]})]})})})},S=function(e){return e?Object(u.jsxs)(r.d,{children:[Object(u.jsx)(r.b,{path:"/todos",exact:!0,children:Object(u.jsx)(w,{})}),Object(u.jsx)(r.b,{path:"/create",exact:!0,children:Object(u.jsx)(y,{})}),Object(u.jsx)(r.a,{to:"/todos"})]}):Object(u.jsxs)(r.d,{children:[Object(u.jsx)(r.b,{path:"/",exact:!0,children:Object(u.jsx)(C,{})}),Object(u.jsx)(r.a,{to:"/"})]})};n(36);var E=function(){var e=h(),t=e.login,n=e.signup,c=e.logout,a=e.token,s=e.userId,r=!!a,i=S(r);return Object(u.jsx)(l.Provider,{value:{login:t,signup:n,logout:c,token:a,userId:s},children:Object(u.jsxs)(o.a,{children:[r&&Object(u.jsx)(j,{}),Object(u.jsx)("div",{className:"container",children:i})]})})};s.a.render(Object(u.jsx)(E,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.95c3002d.chunk.js.map